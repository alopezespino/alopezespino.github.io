<!DOCTYPE html>

<html lang="en-us"><head>
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VC82P5VDDQ"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-VC82P5VDDQ', { 'anonymize_ip': false });
}
</script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo&family=Noto+Serif+JP&family=Cormorant+Garamond&family=Libre+Baskerville&family=Source+Serif+Pro&family=Crimson+Text&family=Inter&family=Crimson+Pro&family=Literata&family=Ubuntu+Mono&family=Inter&family=Roboto">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    
    <link rel="stylesheet" href="/css/prism.css" />
    
    <script src='/js/prism.js'></script>
    <link rel="stylesheet" type="text/css" href="/css/custom.css">

    
    

    <title>Alejandra López Espino | SSH Keys: A Guide to Remote Server Access</title>

</head>
<body class="container d-flex flex-column min-vh-100">
<div class="flex-container">
  <style>
    .outline {
        position: sticky;
        top: 0;
        left: 0px;
        background-color: #f9f9f9;
        padding: 10px;
        margin-left: 10px;
        border: 1px solid #ddd;
        text-align: left;
    }

    @media (max-width: 700px) {
        .outline {
            display: none;
        }
    }

    .outline h3 {
        margin-top: 0;
    }

    .outline ul {
        list-style-type: none;
        padding: 0;
    }

    .outline li {
        list-style-type: none;
        margin-bottom: 5px;  
        padding-left: 10px;
        padding-right: 10px;
    }

    .outline li a {
        text-decoration: none;  
        color: inherit;  
    }
    .outline li.level-0 {
        font-weight: '900';
        font-size: 'x-large';
    }
    .outline li.level-1 {
        font-weight: 600;
        text-indent: 0px;
        text-align: left;
    }

    .outline li.level-2 {
        font-weight: 400;
        text-indent: 0px;
        margin-left: 20px;
    }

    .outline li.level-3 {
        font-weight: 200;
        text-indent: 0px;
        margin-left: 40px;
        color: rgb(116, 114, 114);
    }

    .center {
  display: flex;
  justify-content: center;
  align-items: center;
}

   .active {
      background-color: #d3d3d3;  
   }

  
    .outline .blog_navbar {
        position: fixed;
        top: 0px;
        left: 0px;
        width: 300px;
        background-color: #f9f9f9;
        padding: 20px;
        border: 1px solid #ddd;
    }
    aside {
        position:sticky;
        max-height: fit-content;
    }
</style>

<aside class="outline">
<div class="row w-100 justify-content-center">
    <img class="rounded-circle" src="/images/profile.png" alt="profile_picture" id="profile_picture2"
    style = "padding-top: 10px;" />
    <h3
    style="padding-top: 30px;
    margin:0;
    padding-bottom:0;
    length:20px;
    font-weight: 500;
    text-align: left">Contents</h3>
<hr style="margin-top: 2px;" />
    <div id="outline-list"></div>
</aside>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const outlineList = document.getElementById("outline-list");
    const headings = Array.from(document.querySelectorAll('h1, h2, h3, h4, h5'));
    headings.shift(); 
    

    headings.forEach((heading, index) => {
        
        
        
       
        const listItem = document.createElement("li");

        
        
        if (index === 0) {
            listItem.classList.add(`level-1`);
        } else {
            let currentLevel = parseInt(heading.tagName.substring(1), 10); 
            listItem.classList.add(`level-${currentLevel}`);
        }

        
        listItem.innerHTML = `<a href="#${heading.id}">${heading.textContent || heading.innerText}</a>`;

        
        outlineList.appendChild(listItem);
    });
    
function removeActiveClasses() {
  const outlineListItems = outlineList.querySelectorAll('li');
  outlineListItems.forEach(item => item.classList.remove('active'));
}


window.addEventListener('scroll', () => {
  let fromTop = window.scrollY;

  headings.forEach((heading) => {
    
    if (
      heading.offsetTop <= fromTop &&
      heading.offsetTop + heading.offsetHeight > fromTop
    ) {
      
      const listItem = outlineList.querySelector(`li a[href="#${heading.id}"]`)?.parentNode;
      if (listItem) {
        removeActiveClasses();
        listItem.classList.add('active');
      }
    }
  });
});
});
</script>


  <section>
    <div class="content">
      <div class="navbar-sticky">
        <div class="blog_nav_bar">
    <img src="/favicon.ico" alt="" height="25px">
    
    
    <a class="navbar-brand" href="/">&nbsp;&nbsp;Home</a>
    
    
    
    
    <a class="navbar-brand" href="/blog">Posts</a>
    
    
</div>
 

<h3 style="font-size: 24px; font-weight:400">
    <a class="title" href="/sshconfig/">SSH Keys: A Guide to Remote Server Access</a>
</h3>

<div class="reading_time secondary_font text-muted ">
    <span>
        by Alejandra López Espino | Mar 8 2024 · 3 min read
    </span>

</div>




<div class="tags_navigation">
    
    <a class="tag" href="/tags/SSHkeys/">#SSHkeys</a>
    
    <a class="tag" href="/tags/remote-access/">#remote-access</a>
    
    <a class="tag" href="/tags/HPC/">#HPC</a>
    
    <a class="tag" href="/tags/cluster/">#cluster</a>
    
    <a class="tag" href="/tags/RoarCollab/">#RoarCollab</a>
    
    <a class="tag" href="/tags/tutorial/">#tutorial</a>
    
    <a class="tag" href="/tags/server/">#server</a>
    
</div>


<hr style="margin-top: 10px; margin-bottom:10px" />

      </div>
      <h1 id="what-are-ssh-keys">What are SSH keys</h1>
<p>SSH keys are a pair of cryptographic keys that enable secure, password-less remote access to servers and other systems.</p>
<h2 id="amplifying-workflow-with-ssh-authentication">Amplifying Workflow with SSH Authentication</h2>
<p>SSH authentication serves as a significant enhancer of your research workflow when working with High Performance Computing (HPC) resources. It paves the way for smooth file transfers between your local computer and the server straight from terminal, eradicating the need for repeated password input.</p>
<p>Besides, SSH authentication aid in working on your code locally while executing it remotely, making use of applications like VS Code. A detailed guide to configure VS Code for this purpose can be find in another of my posts.</p>
<p>Do note, for the systems utilizing two-factor authentication, this secondary verification remains mandatory. For instance, Roar Collab server requires full password + second factor authentication once every 24 hours.</p>
<h2 id="widespread-applicability">Widespread Applicability</h2>
<p>While these instructions are primarily tailored for <a href="https://www.icds.psu.edu/roar-collab/">Roar Collab</a>, Penn State&rsquo;s High Performance Computing (HPC) Cluster, they hold widespread relevance to any server equipped with SSH and SCP capabilities.</p>
<p>Whether you&rsquo;re working with a different HPC cluster or a standard Linux server, these guidelines can perfectly fit in securing access configuration with an SSH key. Throughout the guide, you&rsquo;ll encounter placeholders like <code>&lt;psu-id&gt;</code> and <code>submit.hpc.psu.edu</code>. Simply replace <code>&lt;psu-id&gt;</code> with your unique user ID or username, and <code>submit.hpc.psu.edu</code> with your specific server or HPC cluster&rsquo;s address.</p>
<h2 id="step-wise-guide-to-use-ssh-key">Step-wise Guide to Use SSH Key</h2>
<h3 id="step-1-generate-ssh-key">Step 1: Generate SSH Key</h3>
<ul>
<li>Launch the SSH Agent:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ alias startssh<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;eval `ssh-agent -s`&#34;</span>
</span></span></code></pre></div><ul>
<li>Create your SSH key using command:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd ~/.ssh
</span></span><span style="display:flex;"><span>ssh-keygen
</span></span></code></pre></div><p>During the exercise, choose a name for your SSH key. Here, I use <code>&lt;SSHkey_name&gt;</code> as a placeholder.</p>
<p>Provide an empty passphrase by simply pressing <code>Enter</code>, and repeat when prompted.</p>
<p>You can verify that this process created two files <code>&lt;SSHkey_name&gt;</code> and <code>&lt;SSHkey_name&gt;.pub</code> by running</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -l
</span></span></code></pre></div><h3 id="step-2-transfer-key-to-server">Step 2: Transfer Key to Server</h3>
<p>Use this command to copy your SSH key to server:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh-copy-id -i ~/.ssh/&lt;SSHkey_name&gt; &lt;psu-id&gt;@submit.hpc.psu.edu
</span></span></code></pre></div><h3 id="step-3-configure-connection">Step 3: Configure Connection</h3>
<p>Add these lines to your <code>~/.ssh/config</code> file to configure connection:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Host rcollab submit.hpc.psu.edu
</span></span><span style="display:flex;"><span>  HostName submit.hpc.psu.edu
</span></span><span style="display:flex;"><span>  IdentityFile /storage/home/&lt;psu-id&gt;/.ssh/&lt;SSHkey_name&gt;
</span></span><span style="display:flex;"><span>  User &lt;psu-id&gt;
</span></span><span style="display:flex;"><span>  ForwardX11 yes
</span></span><span style="display:flex;"><span>  ForwardX11Trusted yes
</span></span></code></pre></div><p><em>Note: You&rsquo;ll need to create the file, if it doesn&rsquo;t exist.</em></p>
<p>This snippet serves two purposes. first, it tells the system where to find your SSH key. Second, using</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh &lt;psuid&gt;@submit.hpc.psu.edu
</span></span></code></pre></div><p>to connect to Roar Collab via the terminal, now you can simply do</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh rcollab
</span></span></code></pre></div><p>Use this new method to verify that you have set up the SSH key correctly.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>If the connection fails, start the SSH agent on server:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>startssh
</span></span></code></pre></div><p>Next, add the key:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh-add &lt;SSHkey_name&gt;
</span></span></code></pre></div><p>And that&rsquo;s about it. Some of your Roar Collab actions can now be automated. Do remember, the password input and two-factor authentication completion is still needed once every 24 hours.</p>
<p>For more detailed insights, these resources can be of help:</p>
<ul>
<li>
<p><a href="https://www.ssh.com/academy/ssh/keygen"><strong>Generating an SSH Key</strong></a></p>
</li>
<li>
<p><a href="https://www.ssh.com/academy/ssh/config"><strong>SSH Configuration</strong></a></p>
</li>
<li>
<p><a href="https://www.ssh.com/academy/ssh/add-command"><strong>SSH Add Command</strong></a></p>
</li>
<li>
<p><a href="https://stackoverflow.com/questions/25464930/how-can-i-remove-an-ssh-key"><strong>Removing an SSH Key</strong></a></p>
</li>
</ul>

    </div>
  </section>
</div>

<style>

  .flex-container {
    display: flex;
  }
  .flex-container section {
    flex: 1; 
  }
  .content {
    width: 800px;  
    top: 0;
    vertical-align: top;
    margin-left: 30px;
  }
  .navbar-sticky {
    position: sticky;
    top: 0;
    background-color: white;  
    z-index: 99;  
  }

  :target:before {
     
    content: "";
    display: block;
    height: 270px;  
    margin: -270px 0 0;  
  }
   
  .content .blog_navbar {
    position: fixed;
    top: 0px;
    left: 0px;
    width: 300px;
    background-color: #f9f9f9;
    padding: 20px;
    border: 1px solid #ddd;
  }
</style>
<footer class="mt-auto d-flex justify-content-center text-muted small secondary_font">
    <p style='color: #E8E8E9'>Copyright (c) 2022, Alejandra Lopez
    Espino, <a href="https://github.com/hadisinaee/avicenna" style="color: #E8E8E9">
    created by Avicenna
    (MIT)</a></p>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
    crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.28.0/feather.min.js"></script>
<script>
    feather.replace()
</script></body>

</html>
